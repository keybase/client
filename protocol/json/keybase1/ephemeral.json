{
  "protocol": "ephemeral",
  "imports": [
    {
      "path": "common.avdl",
      "type": "idl"
    }
  ],
  "types": [
    {
      "type": "record",
      "name": "EkGeneration",
      "fields": [],
      "lint": "ignore",
      "typedef": "int64"
    },
    {
      "type": "record",
      "name": "DeviceEkStatement",
      "fields": [
        {
          "type": "DeviceEkMetadata",
          "name": "currentDeviceEk",
          "jsonkey": "current_device_ek"
        },
        {
          "type": {
            "type": "array",
            "items": "DeviceEkMetadata"
          },
          "name": "existingDeviceEks",
          "jsonkey": "existing_device_eks"
        }
      ]
    },
    {
      "type": "record",
      "name": "DeviceEkMetadata",
      "fields": [
        {
          "type": "KID",
          "name": "kid",
          "jsonkey": "device_ephemeral_dh_public"
        },
        {
          "type": "HashMeta",
          "name": "hashMeta",
          "jsonkey": "hash_meta"
        },
        {
          "type": "EkGeneration",
          "name": "generation"
        },
        {
          "type": "Time",
          "name": "ctime"
        }
      ]
    },
    {
      "type": "record",
      "name": "DeviceEk",
      "fields": [
        {
          "type": "Bytes32",
          "name": "seed"
        },
        {
          "type": "DeviceEkMetadata",
          "name": "metadata"
        }
      ]
    },
    {
      "type": "record",
      "name": "UserEkStatement",
      "fields": [
        {
          "type": "UserEkMetadata",
          "name": "currentUserEk",
          "jsonkey": "current_user_ek"
        },
        {
          "type": {
            "type": "array",
            "items": "UserEkMetadata"
          },
          "name": "existingUserEks",
          "jsonkey": "existing_user_eks"
        }
      ]
    },
    {
      "type": "record",
      "name": "UserEkMetadata",
      "fields": [
        {
          "type": "KID",
          "name": "kid",
          "jsonkey": "user_ephemeral_dh_public"
        },
        {
          "type": "HashMeta",
          "name": "hashMeta",
          "jsonkey": "hash_meta"
        },
        {
          "type": "EkGeneration",
          "name": "generation"
        },
        {
          "type": "Time",
          "name": "ctime"
        }
      ]
    },
    {
      "type": "record",
      "name": "UserEkBoxed",
      "fields": [
        {
          "type": "string",
          "name": "box"
        },
        {
          "type": "EkGeneration",
          "name": "deviceEkGeneration",
          "jsonkey": "device_ek_generation"
        },
        {
          "type": "UserEkMetadata",
          "name": "metadata"
        }
      ]
    },
    {
      "type": "record",
      "name": "UserEk",
      "fields": [
        {
          "type": "Bytes32",
          "name": "seed"
        },
        {
          "type": "UserEkMetadata",
          "name": "metadata"
        }
      ]
    }
  ],
  "messages": {},
  "namespace": "keybase.1"
}