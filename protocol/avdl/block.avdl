@namespace("keybase.1")

protocol block {
	import idl "backend_common.avdl";

	record GetBlockRes {
		string blockKey;
		bytes buf;
	}

	void establishSession(UID user, string sid);

	void putBlock(BlockIdCombo bid, string folder, string blockKey, bytes buf);
	GetBlockRes getBlock(BlockIdCombo bid);

	void incBlockReference(BlockIdCombo bid, string nonce, string folder, UID chargedTo);
	void decBlockReference(BlockIdCombo bid, string nonce, string folder, UID chargedTo);

}
